<!-- Firebase SDK를 추가 -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

<script>
    // Firebase 초기화
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        databaseURL: "https://your-database-url.firebaseio.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let winners = {};
    
    // 참가자 데이터 읽기
    function loadEntries() {
        const entryList = document.getElementById('entryList');
        db.ref('winners').on('value', (snapshot) => {
            winners = snapshot.val() || {};
            entryList.innerHTML = "";
            for (let key in winners) {
                let li = document.createElement('li');
                li.innerText = `보물 ID ${key}: 학번 ${winners[key].studentId}, 이름 ${winners[key].name}`;
                let deleteButton = document.createElement('button');
                deleteButton.innerText = '삭제';
                deleteButton.onclick = function() { deleteParticipant(key); };
                li.appendChild(deleteButton);
                entryList.appendChild(li);
            }
        });
    }

    // 참가자 제출
    function submitEntry() {
        let studentId = document.getElementById('studentId').value.trim();
        let name = document.getElementById('name').value.trim();
        let result = document.getElementById('result');

        if (!studentId || !name) {
            result.innerText = "학번과 이름을 입력해주세요.";
            return;
        }

        if (winners[treasureId]) {
            result.innerText = "이미 이 보물이 찾아졌습니다!";
            return;
        }

        // Firebase에 참가자 정보 저장
        winners[treasureId] = { studentId, name };
        db.ref('winners').set(winners);
        result.innerText = "축하합니다! 보물을 찾았습니다!";
    }

    // 참가자 삭제
    function deleteParticipant(treasureId) {
        let inputDeletePass = document.getElementById('deletePass').value.trim();
        if (inputDeletePass === deletePassword) {
            delete winners[treasureId];
            db.ref('winners').set(winners);
            alert("참가자가 삭제되었습니다.");
            loadEntries(); // 참가자 목록 갱신
        } else {
            alert("삭제 비밀번호가 틀렸습니다!");
        }
    }
</script>
